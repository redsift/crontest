{
  "name": "crontest",
  "display-name": "Crontest Sift",
  "description": "",
  "author": "",
  "version": "1.0.0",
  "icon": "assets/blueprint.svg",
  "interfaces": {
    "summary": {
      "controller": "dist/js/controller.umd-es2015.min.js"
    }
  },
  "dag": {
    "inputs": {
      "rpc": {
        "trigger":{
          "methods":["GET"],
          "path":"/trigger"
        }
      }
    },
    "nodes": [
      {
        "#": "Emit Node",
        "input": {
          "bucket": "trigger-st"
        },
        "implementation": {
          "javascript": "server/node1.js"
        },
        "outputs": {
          "forensics-st":{}
        }
      },
      {
        "#": "Update Forensics Index",
        "input": {
          "bucket": "forensics-st",
          "select": "/"
        },
        "implementation": {
          "go": "server/gow/emailload/load.go",
          "sandbox": "quay.io/redsift/sandbox-go-dmarc-insights:vcrontest",
          "qos": {
            "large-storage": [
              "rocksdb_store_forensics:rw"
            ]
          }
        }
      },
      {
        "#": "RPC trigger",
        "input":{
          "bucket": "trigger"
        },
        "implementation": {
          "javascript": "server/rpc.js"
        },
        "outputs":{
          "trigger-st": {},
          "api_rpc": {}
        }
      },
      {
        "#": "Cron trigger",
        "implementation":{
          "javascript": "server/cron.js",
          "when":{
            "interval": 180
          }
        },
        "outputs":{
          "trigger-st": {}
        }
      }
    ],
    "stores": {
      "forensics-st": {
        "key$schema": "string/string"
      },
      "trigger-st": {
        "key$schema": "string"
      }
    },
    "outputs": {
      "exports":{
        "api_rpc":{
          "import":"_rpc"
        }
      }
    }
  }
}
